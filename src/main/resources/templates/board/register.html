<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/inc.html}">

<div layout:fragment="content">
    <style>
        * { margin: 0; padding: 0; }
        ul, li { list-style: none; padding-left: 0; }
        a { text-decoration: none; }

        .post-container { background-color: #FFFFFF; padding: 100px 0; }
        .post-container .form-control {border: none; outline: none; font-size: 26px; }
        .post-container .form-control:focus { border: none;  box-shadow: none; }
        .post-body { min-height: 600px; }
    </style>

    <div class="post-container">
        <form action="/board/register" method="post" name="frmRegister" enctype="multipart/form-data">
            <h1><input type="text" name="title" class="form-control" placeholder="제목 입력"></h1>
            <div class="post-header">
                <input type="hidden" name="writer" th:value="test5678"> <!-- 시큐리티로 로그인된 사용자 정보 전달 -->
            </div>
            <hr>
            <div class="post-body">
            <textarea name="content" id="content" cols="50" rows="5" class="form-control" placeholder="content"
                      style="width: 100%; height: 600px;"></textarea>
            </div>
            <div>
                <button type="submit" class="btn btn-primary">등록</button>
                <a th:href="@{/board/list}"><button type="button" class="btn btn-secondary">목록</button></a>
            </div>
        </form>
    </div>

    <!-- 네이버 에디터 설정 -->
    <script type="text/javascript" src="/smarteditor2/js/HuskyEZCreator.js" charset="utf-8"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            let oEditors = [];

            nhn.husky.EZCreator.createInIFrame({
               oAppRef: oEditors,
               elPlaceHolder: "content", // id가 content인 요소를 지정.
               sSkinURI: "/smarteditor2/SmartEditor2Skin.html",
               fCreator: "createSEditor2"
            });

            const btnSubmit = document.querySelector('button[type=submit]');
            const frmRegister = document.querySelector('form[name=frmRegister]');

            // 등록 버튼 클릭시 이벤트
            btnSubmit.addEventListener('click', function (e) {
                e.preventDefault();
                e.stopPropagation();
                oEditors.getById["content"].exec("UPDATE_CONTENTS_FIELD", []);

                if (!frmRegister.title.value) {
                    alert("제목을 입력해주세요.");
                    return;
                }
                frmRegister.submit();
            });
        });
    </script>
</div><!-- layout fragment end -->

<script layout:fragment="script" th:inline="javascript">

</script>






